import { Meta, Story, Preview } from '@storybook/addon-docs/blocks'
import Sprites from '../src/Sprites'
import { Provider } from '@envato/react-breakpoints'
import { ResizeObserver } from '@juggle/resize-observer'
import DemoResizer from '../src/DemoResizer'
import DemoGrid from '../src/DemoGrid'
import DemoItem from '../src/DemoItem'
import cats from '../src/cats'

<Meta
  title="Demo/ItemGrid"
  component={DemoGrid}
  decorators={[
    storyFn => (
      <>
        <Sprites />
        <Provider ponyfill={ResizeObserver}>{storyFn()}</Provider>
      </>
    )
  ]}
/>

### Composition of responsive components

<Story name="DemoGrid">
  <DemoResizer init='240px'>
    <DemoGrid>
      {cats.map(cat => <DemoItem key={cat.title} {...cat} />)}
    </DemoGrid>
  </DemoResizer>
</Story>

```css
.root {
  display: grid;
  grid-template-columns: repeat(var(--columns), 1fr);
  grid-gap: 16px;
}
```

```jsx
import React from 'react'
import { Observe } from '@envato/react-breakpoints'
import styles from './DemoGrid.module.css'

const DemoGrid = ({ children }) => (
  <Observe
    box='content-box'
    breakpoints={{
      box: 'content-box',
      widths: {
        0: 1,
        540: 2,
        1000: 3
      }
    }}
    render={({ observedElementProps, widthMatch: columns }) => (
      <div
        {...observedElementProps}
        className={styles.root}
        style={{ '--columns': columns }}
      >
        {children}
      </div>
    )}
  />
)

export default DemoGrid
```
